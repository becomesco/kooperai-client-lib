!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function p(){return u(" ")}function g(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function x(t){const e={};for(const n of t)e[n.name]=n.value;return e}let b;function v(t){b=t}function $(t){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_mount.push(t)}const k=[],y=[],w=[],W=[],_=Promise.resolve();let L=!1;function E(t){w.push(t)}let M=!1;const T=new Set;function A(){if(!M){M=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];v(e),j(e.$$)}for(v(null),k.length=0;y.length;)y.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];T.has(e)||(T.add(e),e())}w.length=0}while(k.length);for(;W.length;)W.pop()();L=!1,M=!1,T.clear()}}function j(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const z=new Set;function H(t,e){-1===t.$$.dirty[0]&&(k.push(t),L||(L=!0,_.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function C(r,a,s,c,d,u,p=[-1]){const g=b;v(r);const f=a.props||{},h=r.$$={fragment:null,ctx:null,props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(g?g.$$.context:[]),callbacks:n(),dirty:p,skip_bound:!1};let m=!1;if(h.ctx=s?s(r,f,((t,e,...n)=>{const i=n.length?n[0]:e;return h.ctx&&d(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),m&&H(r,t)),e})):[],h.update(),m=!0,i(h.before_update),h.fragment=!!c&&c(h.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);h.fragment&&h.fragment.l(t),t.forEach(l)}else h.fragment&&h.fragment.c();a.intro&&((x=r.$$.fragment)&&x.i&&(z.delete(x),x.i($))),function(t,n,r){const{fragment:a,on_mount:s,on_destroy:l,after_update:c}=t.$$;a&&a.m(n,r),E((()=>{const n=s.map(e).filter(o);l?l.push(...n):i(n),t.$$.on_mount=[]})),c.forEach(E)}(r,a.target,a.anchor),A()}var x,$;v(g)}let I;function N(t,e,n){const i=t.slice();return i[14]=e[n],i}function R(t,e,n){const i=t.slice();return i[17]=e[n],i[19]=n,i}function B(t){let e,n,i,o,r,u,g=t[3],h=[];for(let e=0;e<g.length;e+=1)h[e]=O(R(t,g,e));let m=t[1].length>1&&P(t);return{c(){e=d("div"),n=d("header"),n.innerHTML='<div class="kaiWidget--header-title">You might be interested in</div>',i=p(),o=d("div"),r=d("div");for(let t=0;t<h.length;t+=1)h[t].c();u=p(),m&&m.c(),f(n,"class","kaiWidget--header"),f(r,"class","kaiWidget--items"),f(o,"class","kaiWidget--body"),f(e,"class","kaiWidget--wrapper")},m(t,l){s(t,e,l),a(e,n),a(e,i),a(e,o),a(o,r);for(let t=0;t<h.length;t+=1)h[t].m(r,null);a(e,u),m&&m.m(e,null)},p(t,n){if(56&n){let e;for(g=t[3],e=0;e<g.length;e+=1){const i=R(t,g,e);h[e]?h[e].p(i,n):(h[e]=O(i),h[e].c(),h[e].m(r,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=g.length}t[1].length>1?m?m.p(t,n):(m=P(t),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(t){t&&l(e),c(h,t),m&&m.d()}}}function K(t){let e,n,i,o,r,c,g,m,x,b,v,$,k=t[17].title+"",y=t[17].description+"";return{c(){e=d("a"),n=d("img"),r=p(),c=d("div"),g=u(k),m=p(),x=d("div"),b=u(y),v=p(),f(n,"class","kaiWidget--item-image"),n.src!==(i=t[17].image)&&f(n,"src",i),f(n,"alt",o=t[17].image),f(c,"class","kaiWidget--item-title"),f(x,"class","kaiWidget--item-description"),f(e,"href",$=t[17].uri),f(e,"class","kaiWidget--item")},m(t,i){s(t,e,i),a(e,n),a(e,r),a(e,c),a(c,g),a(e,m),a(e,x),a(x,b),a(e,v)},p(t,r){8&r&&n.src!==(i=t[17].image)&&f(n,"src",i),8&r&&o!==(o=t[17].image)&&f(n,"alt",o),8&r&&k!==(k=t[17].title+"")&&h(g,k),8&r&&y!==(y=t[17].description+"")&&h(b,y),8&r&&$!==($=t[17].uri)&&f(e,"href",$)},d(t){t&&l(e)}}}function O(t){let e,n=t[19]>=t[4]&&t[19]<t[5]&&K(t);return{c(){n&&n.c(),e=u("")},m(t,i){n&&n.m(t,i),s(t,e,i)},p(t,i){t[19]>=t[4]&&t[19]<t[5]?n?n.p(t,i):(n=K(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&l(e)}}}function P(t){let e,n,i,o,r=t[1],u=[];for(let e=0;e<r.length;e+=1)u[e]=S(N(t,r,e));let g=t[4]>0&&V(t),h=t[5]<t[3].length&&X(t);return{c(){e=d("div");for(let t=0;t<u.length;t+=1)u[t].c();n=p(),i=d("div"),g&&g.c(),o=p(),h&&h.c(),f(e,"class","kaiWidget--footer"),f(i,"class","kaiWidget--nav")},m(t,r){s(t,e,r);for(let t=0;t<u.length;t+=1)u[t].m(e,null);s(t,n,r),s(t,i,r),g&&g.m(i,null),a(i,o),h&&h.m(i,null)},p(t,n){if(3&n){let i;for(r=t[1],i=0;i<r.length;i+=1){const o=N(t,r,i);u[i]?u[i].p(o,n):(u[i]=S(o),u[i].c(),u[i].m(e,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=r.length}t[4]>0?g?g.p(t,n):(g=V(t),g.c(),g.m(i,o)):g&&(g.d(1),g=null),t[5]<t[3].length?h?h.p(t,n):(h=X(t),h.c(),h.m(i,null)):h&&(h.d(1),h=null)},d(t){t&&l(e),c(u,t),t&&l(n),t&&l(i),g&&g.d(),h&&h.d()}}}function S(t){let e,n;return{c(){e=d("span"),f(e,"class",n=t[14]===t[0]?"is-active":"")},m(t,n){s(t,e,n)},p(t,i){3&i&&n!==(n=t[14]===t[0]?"is-active":"")&&f(e,"class",n)},d(t){t&&l(e)}}}function V(e){let n,i,o;return{c(){n=d("button"),n.innerHTML='<svg viewBox="0 0 30 35" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.681.743h-4.094v33.842h4.094V.743zM1.748.743l16.318 16.313L.537 34.585h5.79l17.524-17.53L7.538.744h-5.79z" fill="#fff"></path></svg>',f(n,"class","kaiWidget--nav-left")},m(t,r){s(t,n,r),i||(o=g(n,"click",e[9]),i=!0)},p:t,d(t){t&&l(n),i=!1,o()}}}function X(e){let n,i,o;return{c(){n=d("button"),n.innerHTML='<svg viewBox="0 0 30 35" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.681.743h-4.094v33.842h4.094V.743zM1.748.743l16.318 16.313L.537 34.585h5.79l17.524-17.53L7.538.744h-5.79z" fill="#fff"></path></svg>',f(n,"class","kaiWidget--nav-right")},m(t,r){s(t,n,r),i||(o=g(n,"click",e[10]),i=!0)},p:t,d(t){t&&l(n),i=!1,o()}}}function q(e){let n,i,o,r,c=e[2]&&B(e);return{c(){n=d("link"),i=d("link"),o=p(),r=d("div"),c&&c.c(),this.c=t,f(n,"rel","preconnect"),f(n,"href","https://fonts.gstatic.com"),f(i,"href","https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"),f(i,"rel","stylesheet"),f(r,"class","kaiWidget"),m(r,"opacity",e[2]?"1":"0")},m(t,e){a(document.head,n),a(document.head,i),s(t,o,e),s(t,r,e),c&&c.m(r,null)},p(t,[e]){t[2]?c?c.p(t,e):(c=B(t),c.c(),c.m(r,null)):c&&(c.d(1),c=null),4&e&&m(r,"opacity",t[2]?"1":"0")},i:t,o:t,d(t){l(n),l(i),t&&l(o),t&&l(r),c&&c.d()}}}"function"==typeof HTMLElement&&(I=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function F(t,e,n){let i,o;var r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))};let{groupname:a="any"}=e,{itemcount:s="9"}=e;s=parseInt(s);let l,c=1,d=[1],u=!1,p=[],g="";function f(t){t>0?(n(0,c++,c),c>d.length&&n(0,c=d.length)):(n(0,c--,c),c<1&&n(0,c=1))}$((()=>r(void 0,void 0,void 0,(function*(){if(window.KooperAI){g=window.KooperAI.clientHash,l=yield window.KooperAI.services.api.stats();let t=l.stats.sort(((t,e)=>e.visits.all-t.visits.all)).map((t=>({uri:t.page,title:"This is title",description:"This is description",image:"This is image",groups:t.groups})));t="any"===a?t.slice(0,s):t.filter((t=>!t.groups||t.groups.includes(a))).slice(0,s);for(const e in t){const n=t[e];try{const t=yield fetch(`${n.uri}/${g}.json`),e=yield t.json();p.push({uri:n.uri,description:e.description,image:e.image,title:e.title,groups:e.groups})}catch(t){console.error(t)}}const e=parseInt(""+p.length/3);e>1&&n(1,d=Array.from(Array(e)).map(((t,e)=>e+1))),n(2,u=!0),n(3,p=[...p])}}))));return t.$$set=t=>{"groupname"in t&&n(8,a=t.groupname),"itemcount"in t&&n(7,s=t.itemcount)},t.$$.update=()=>{1&t.$$.dirty&&n(4,i=3*c-3),1&t.$$.dirty&&n(5,o=3*c)},[c,d,u,p,i,o,f,s,a,()=>{f(-1)},()=>{f(1)}]}customElements.define("kooperai-widget",class extends I{constructor(t){super(),this.shadowRoot.innerHTML='<style>.kaiWidget{margin:30px;transition:opacity 0.2s;background:#ffffff;box-shadow:0px 4px 4px rgba(0, 0, 0, 0.25);font-family:"Roboto";font-weight:700;position:relative;min-height:450px}.kaiWidget--header{padding:18px 37px;border-bottom:1px solid #ced2dd}.kaiWidget--header-title{font-size:16px;line-height:1.6;color:#abd037}.kaiWidget--body{padding:15px 20px}.kaiWidget--items{display:grid;grid-template-columns:repeat(3, 1fr);gap:15px}.kaiWidget--item{padding:15px;text-decoration:none;transition:all 0.3s}.kaiWidget--item:hover{box-shadow:0px 4px 4px rgba(0, 0, 0, 0.1)}.kaiWidget--item-image{background:#f1f1f1;width:100%;display:block;height:200px;margin-bottom:16px;object-fit:cover}.kaiWidget--item-title{font-size:24px;color:#000000}.kaiWidget--item-description{font-size:16px;line-height:2;letter-spacing:0.02em;color:#505b79;font-weight:400}.kaiWidget--footer{display:flex;justify-content:center;padding-bottom:30px;padding-top:10px}.kaiWidget--footer span{width:5px;height:5px;display:block;padding:0;border-radius:50%;border:none;background:lightgray;margin:2px}.kaiWidget--footer span.is-active{background:#505b79}.kaiWidget--nav button{width:60px;height:60px;background:#abd037;box-shadow:0px 15px 22px -10px rgba(80, 91, 121, 0.55);display:flex;align-items:center;justify-content:center;border:0;position:absolute;top:35%;cursor:pointer;transition:all 0.22s ease}.kaiWidget--nav button:hover{box-shadow:0px 15px 32px -10px rgba(80, 91, 121, 0.75)}.kaiWidget--nav button svg{position:relative;width:21px}.kaiWidget--nav-left{transform:translateX(-50%)}.kaiWidget--nav-left svg{transform:rotate(0.5turn)}.kaiWidget--nav-right{right:0;transform:translateX(50%)}</style>',C(this,{target:this.shadowRoot,props:x(this.attributes)},F,q,r,{groupname:8,itemcount:7}),t&&(t.target&&s(t.target,this,t.anchor),t.props&&(this.$set(t.props),A()))}static get observedAttributes(){return["groupname","itemcount"]}get groupname(){return this.$$.ctx[8]}set groupname(t){this.$set({groupname:t}),A()}get itemcount(){return this.$$.ctx[7]}set itemcount(t){this.$set({itemcount:t}),A()}})}();
//# sourceMappingURL=bundle.js.map
