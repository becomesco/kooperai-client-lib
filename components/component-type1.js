!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function g(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let w;function $(t){w=t}function v(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const _=[],y=[],k=[],b=[],x=Promise.resolve();let W=!1;function A(t){k.push(t)}let I=!1;const K=new Set;function M(){if(!I){I=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];$(e),E(e.$$)}for($(null),_.length=0;y.length;)y.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];K.has(e)||(K.add(e),e())}k.length=0}while(_.length);for(;b.length;)b.pop()();W=!1,I=!1,K.clear()}}function E(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const L=new Set;function T(t,e){t&&t.i&&(L.delete(t),t.i(e))}function j(t,n,r,s){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(n,r),s||A((()=>{const n=c.map(e).filter(o);a?a.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(A)}function z(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(_.push(t),W||(W=!0,x.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,o,r,s,l,a,u=[-1]){const d=w;$(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(f.ctx=r?r(e,o.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),p&&N(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(c)}else f.fragment&&f.fragment.c();o.intro&&T(e.$$.fragment),j(e,o.target,o.anchor,o.customElement),M()}$(d)}class B{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const H={async fetchPageMeta(t){if(window.KooperAI&&window.KooperAI.mock)return{author:{first_name:"Mock",last_name:"User",image:"https://kooper.ai/icons/icon-512x512.png"},date_in_millis:Date.now(),description:"This is some post description.",subtitle:"This is some post subtitle",title:"This is some post title",image:"https://kooper.ai/media/home/real-time-optimisation/photo-1591696205602-2f950c417cb9-600.jpeg",groups:[],time_to_read_in_min:5,uri:"#"};try{const e=await fetch(`${t}/${window.KooperAI.clientHash}.json`),n=await e.json();return n.uri=t,n}catch(t){console.error(t)}},handleFunction(t,e){if(t&&window.KooperAI.functions[t])try{const n=window.KooperAI.functions[t](...e);n instanceof Promise&&n.catch((t=>{console.error(t)}))}catch(t){console.error(t)}},mapItems:t=>t.map((t=>({title:t.title?t.title:"",subtitle:t.subtitle?t.subtitle:"",description:t.description?t.description:"",author:t.author,date_in_millis:t.date_in_millis,groups:t.groups?t.groups:[],image:t.image?t.image:"#",time_to_read_in_min:t.time_to_read_in_min,uri:t.uri})))};function F(e){let n,i;return{c(){n=u("link"),i=u("link"),m(n,"rel","preconnect"),m(n,"href","https://fonts.gstatic.com"),m(i,"href","https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"),m(i,"rel","stylesheet")},m(t,e){s(document.head,n),s(document.head,i)},p:t,i:t,o:t,d(t){c(n),c(i)}}}class O extends B{constructor(t){super(),P(this,t,null,F,r,{})}}function C(t,e,n){const i=t.slice();return i[21]=e[n],i}function S(t,e,n){const i=t.slice();return i[24]=e[n],i[26]=n,i}function V(t){let e,n,i,o,r,g,w,$,v=t[5],_=[];for(let e=0;e<v.length;e+=1)_[e]=D(S(t,v,e));let y=t[3].length>1&&R(t);return{c(){e=u("header"),n=u("div"),i=d(t[0]),o=f(),r=u("div"),g=u("div");for(let t=0;t<_.length;t+=1)_[t].c();w=f(),y&&y.c(),$=p(),m(n,"class","kaiWidget--header-title"),m(e,"class","kaiWidget--header"),m(g,"class","kaiWidget--list"),m(r,"class","kaiWidget--body")},m(t,c){l(t,e,c),s(e,n),s(n,i),l(t,o,c),l(t,r,c),s(r,g);for(let t=0;t<_.length;t+=1)_[t].m(g,null);l(t,w,c),y&&y.m(t,c),l(t,$,c)},p(t,e){if(1&e&&h(i,t[0]),224&e){let n;for(v=t[5],n=0;n<v.length;n+=1){const i=S(t,v,n);_[n]?_[n].p(i,e):(_[n]=D(i),_[n].c(),_[n].m(g,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=v.length}t[3].length>1?y?y.p(t,e):(y=R(t),y.c(),y.m($.parentNode,$)):y&&(y.d(1),y=null)},d(t){t&&c(e),t&&c(o),t&&c(r),a(_,t),t&&c(w),y&&y.d(t),t&&c($)}}}function q(t){let e,n,i,o,r,a,p,g,w,$,v,_,y=t[24].title+"",k=t[24].description+"";return{c(){e=u("a"),n=u("img"),r=f(),a=u("div"),p=d(y),g=f(),w=u("div"),$=d(k),v=f(),m(n,"class","kaiWidget--item-image"),n.src!==(i=t[24].image)&&m(n,"src",i),m(n,"alt",o=t[24].image),m(n,"draggable","false"),m(a,"class","kaiWidget--item-title"),m(w,"class","kaiWidget--item-description"),m(e,"draggable","false"),m(e,"href",_=t[24].uri),m(e,"class","kaiWidget--item")},m(t,i){l(t,e,i),s(e,n),s(e,r),s(e,a),s(a,p),s(e,g),s(e,w),s(w,$),s(e,v)},p(t,r){32&r&&n.src!==(i=t[24].image)&&m(n,"src",i),32&r&&o!==(o=t[24].image)&&m(n,"alt",o),32&r&&y!==(y=t[24].title+"")&&h(p,y),32&r&&k!==(k=t[24].description+"")&&h($,k),32&r&&_!==(_=t[24].uri)&&m(e,"href",_)},d(t){t&&c(e)}}}function D(t){let e,n=t[26]>=t[6]&&t[26]<t[7]&&q(t);return{c(){n&&n.c(),e=p()},m(t,i){n&&n.m(t,i),l(t,e,i)},p(t,i){t[26]>=t[6]&&t[26]<t[7]?n?n.p(t,i):(n=q(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&c(e)}}}function R(t){let e,n,i,o,r=t[3],d=[];for(let e=0;e<r.length;e+=1)d[e]=U(C(t,r,e));let p=t[6]>0&&Y(t),g=t[7]<t[5].length-1&&G(t);return{c(){e=u("div");for(let t=0;t<d.length;t+=1)d[t].c();n=f(),i=u("div"),p&&p.c(),o=f(),g&&g.c(),m(e,"class","kaiWidget--pagination"),m(i,"class","kaiWidget--nav")},m(t,r){l(t,e,r);for(let t=0;t<d.length;t+=1)d[t].m(e,null);l(t,n,r),l(t,i,r),p&&p.m(i,null),s(i,o),g&&g.m(i,null)},p(t,n){if(522&n){let i;for(r=t[3],i=0;i<r.length;i+=1){const o=C(t,r,i);d[i]?d[i].p(o,n):(d[i]=U(o),d[i].c(),d[i].m(e,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=r.length}t[6]>0?p?p.p(t,n):(p=Y(t),p.c(),p.m(i,o)):p&&(p.d(1),p=null),t[7]<t[5].length-1?g?g.p(t,n):(g=G(t),g.c(),g.m(i,null)):g&&(g.d(1),g=null)},d(t){t&&c(e),a(d,t),t&&c(n),t&&c(i),p&&p.d(),g&&g.d()}}}function U(t){let e,n,i,o;function r(){return t[14](t[21])}return{c(){e=u("button"),m(e,"class",n=t[21]===t[1]?"kaiWidget--pagination-item is-active":"kaiWidget--pagination-item")},m(t,n){l(t,e,n),i||(o=g(e,"click",r),i=!0)},p(i,o){t=i,10&o&&n!==(n=t[21]===t[1]?"kaiWidget--pagination-item is-active":"kaiWidget--pagination-item")&&m(e,"class",n)},d(t){t&&c(e),i=!1,o()}}}function Y(e){let n,i,o;return{c(){n=u("button"),n.innerHTML='<svg viewBox="0 0 30 35" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.681.743h-4.094v33.842h4.094V.743zM1.748.743l16.318 16.313L.537 34.585h5.79l17.524-17.53L7.538.744h-5.79z" fill="#fff"></path></svg>',m(n,"class","kaiWidget--nav-left")},m(t,r){l(t,n,r),i||(o=g(n,"click",e[15]),i=!0)},p:t,d(t){t&&c(n),i=!1,o()}}}function G(e){let n,i,o;return{c(){n=u("button"),n.innerHTML='<svg viewBox="0 0 30 35" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.681.743h-4.094v33.842h4.094V.743zM1.748.743l16.318 16.313L.537 34.585h5.79l17.524-17.53L7.538.744h-5.79z" fill="#fff"></path></svg>',m(n,"class","kaiWidget--nav-right")},m(t,r){l(t,n,r),i||(o=g(n,"click",e[16]),i=!0)},p:t,d(t){t&&c(n),i=!1,o()}}}function J(t){let e,n,i,o,r;e=new O({});let a=t[4]&&V(t);return{c(){var t;(t=e.$$.fragment)&&t.c(),n=f(),i=u("div"),o=u("div"),a&&a.c(),m(o,"class","kaiWidget"),m(i,"class","kaiWidget_t1")},m(c,u){j(e,c,u),l(c,n,u),l(c,i,u),s(i,o),a&&a.m(o,null),t[17](o),r=!0},p(t,[e]){t[4]?a?a.p(t,e):(a=V(t),a.c(),a.m(o,null)):a&&(a.d(1),a=null)},i(t){r||(T(e.$$.fragment,t),r=!0)},o(t){!function(t,e,n,i){if(t&&t.o){if(L.has(t))return;L.add(t),(void 0).c.push((()=>{L.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}(e.$$.fragment,t),r=!1},d(o){z(e,o),o&&c(n),o&&c(i),a&&a.d(),t[17](null)}}}function Q(t,e,n){let i,o;var r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function l(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}c((i=i.apply(t,e||[])).next())}))};let{title:s="You might be interested in"}=e,{groupname:l="any"}=e,{itemcount:c="9"}=e,{itemsperview:a="3"}=e,{onloaded:u}=e;c=parseInt(c),a=parseInt(a);const d=a;let f,p=1,g=[1],m=!1,h=[];function w(t){t>0?(n(1,p++,p),p>g.length&&n(1,p=g.length)):(n(1,p--,p),p<1&&n(1,p=1))}const $=t=>{n(1,p=t)};v((()=>r(void 0,void 0,void 0,(function*(){const t=yield window.KooperAI.services.api.stats(void 0,{group:l});t.stats.sort(((t,e)=>e.visits.all-t.visits.all));const e=[];for(let n=0;n<t.stats.length;n++){const i=t.stats[n],o=yield H.fetchPageMeta(i.page);o&&e.push(o)}const i=parseInt(""+e.length/d);i>1&&n(3,g=Array.from(Array(i)).map(((t,e)=>e+1))),n(5,h=e),n(4,m=!0),H.handleFunction(u,[f,h])}))));return t.$$set=t=>{"title"in t&&n(0,s=t.title),"groupname"in t&&n(12,l=t.groupname),"itemcount"in t&&n(10,c=t.itemcount),"itemsperview"in t&&n(11,a=t.itemsperview),"onloaded"in t&&n(13,u=t.onloaded)},t.$$.update=()=>{2&t.$$.dirty&&n(6,i=p*d-d),2&t.$$.dirty&&n(7,o=p*d)},[s,p,f,g,m,h,i,o,w,$,c,a,l,u,t=>$(t),()=>{w(-1)},()=>{w(1)},function(t){y[t?"unshift":"push"]((()=>{f=t,n(2,f)}))}]}class X extends B{constructor(t){super(),P(this,t,Q,J,r,{title:0,groupname:12,itemcount:10,itemsperview:11,onloaded:13})}}window.KooperAI||(window.KooperAI={}),window.KooperAI.widgets||(window.KooperAI.widgets={}),window.KooperAI.widgets.type1=(t,e)=>{const n=document.getElementById(t);n.innerHTML="",new X({target:n,props:e})}}();
//# sourceMappingURL=component-type1.js.map
