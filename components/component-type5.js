!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function c(t,e,n,i,o,r,c){const a=function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(e,i,o,r);if(a){const o=s(e,n,i,c);t.p(o,a)}}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let g;function $(t){g=t}function y(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const w=[],v=[],_=[],k=[],b=Promise.resolve();let x=!1;function A(t){_.push(t)}let I=!1;const W=new Set;function E(){if(!I){I=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];$(e),P(e.$$)}for($(null),w.length=0;v.length;)v.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];W.has(e)||(W.add(e),e())}_.length=0}while(w.length);for(;k.length;)k.pop()();x=!1,I=!1,W.clear()}}function P(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const j=new Set;let V;function K(t,e){t&&t.i&&(j.delete(t),t.i(e))}function T(t,e,n,i){if(t&&t.o){if(j.has(t))return;j.add(t),V.c.push((()=>{j.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function C(t){t&&t.c()}function M(t,n,r,s){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(n,r),s||A((()=>{const n=a.map(e).filter(o);l?l.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(A)}function N(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(w.push(t),x||(x=!0,b.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(e,o,r,s,c,a,l=[-1]){const d=g;$(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:n(),dirty:l,skip_bound:!1};let p=!1;if(f.ctx=r?r(e,o.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),p&&q(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();o.intro&&K(e.$$.fragment),M(e,o.target,o.anchor,o.customElement),E()}$(d)}class R{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function B(e){let n,i;return{c(){n=d("link"),i=d("link"),m(n,"rel","preconnect"),m(n,"href","https://fonts.gstatic.com"),m(i,"href","https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"),m(i,"rel","stylesheet")},m(t,e){a(document.head,n),a(document.head,i)},p:t,i:t,o:t,d(t){u(n),u(i)}}}class D extends R{constructor(t){super(),S(this,t,null,B,r,{})}}for(var F,H,L=(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}}(H={path:F,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&H.path)}},H.exports),H.exports),O=[],U=0;U<256;++U)O[U]=(U+256).toString(16).substr(1);var z,G,J=function(t,e){var n=e||0,i=O;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")},Q=0,X=0;var Y=function(t,e,n){var i=e&&n||0,o=e||[],r=(t=t||{}).node||z,s=void 0!==t.clockseq?t.clockseq:G;if(null==r||null==s){var c=L();null==r&&(r=z=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=G=16383&(c[6]<<8|c[7]))}var a=void 0!==t.msecs?t.msecs:(new Date).getTime(),l=void 0!==t.nsecs?t.nsecs:X+1,u=a-Q+(l-X)/1e4;if(u<0&&void 0===t.clockseq&&(s=s+1&16383),(u<0||a>Q)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Q=a,X=l,G=s;var d=(1e4*(268435455&(a+=122192928e5))+l)%4294967296;o[i++]=d>>>24&255,o[i++]=d>>>16&255,o[i++]=d>>>8&255,o[i++]=255&d;var f=a/4294967296*1e4&268435455;o[i++]=f>>>8&255,o[i++]=255&f,o[i++]=f>>>24&15|16,o[i++]=f>>>16&255,o[i++]=s>>>8|128,o[i++]=255&s;for(var p=0;p<6;++p)o[i+p]=r[p];return e||J(o)};var Z=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||L)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var r=0;r<16;++r)e[i+r]=o[r];return e||J(o)},tt=Z;tt.v1=Y,tt.v4=Z;var et=tt;function nt(t){let e,n;const i=t[3].default,o=function(t,e,n,i){if(t){const o=s(t,e,n,i);return t[0](o)}}(i,t,t[2],null);return{c(){e=d("div"),o&&o.c(),m(e,"id",t[0])},m(t,i){l(t,e,i),o&&o.m(e,null),n=!0},p(t,[r]){o&&o.p&&4&r&&c(o,i,t,t[2],r,null,null),(!n||1&r)&&m(e,"id",t[0])},i(t){n||(K(o,t),n=!0)},o(t){T(o,t),n=!1},d(t){t&&u(e),o&&o.d(t)}}}function it(t,e,n){let{$$slots:i={},$$scope:o}=e,{id:r=et.v4()}=e,{itemsPerView:s=1}=e;console.log(s);const c={dots:!0,infinite:!0,speed:500,slidesToShow:s,slidesToScroll:s,autoPlay:!0,autoplaySpeed:2e3,cssEase:"linear",arrows:!1};let a=null;return y((()=>{(a||(a=document.getElementById(r),a))&&window.$(a).slick(c)})),t.$$set=t=>{"id"in t&&n(0,r=t.id),"itemsPerView"in t&&n(1,s=t.itemsPerView),"$$scope"in t&&n(2,o=t.$$scope)},[r,s,o,i]}class ot extends R{constructor(t){super(),S(this,t,it,nt,r,{id:0,itemsPerView:1})}}const rt={async fetchPageMeta(t){if(window.KooperAI&&window.KooperAI.mock)return{author:{first_name:"Mock",last_name:"User",image:"https://kooper.ai/icons/icon-512x512.png"},date_in_millis:Date.now(),description:"This is some post description.",subtitle:"This is some post subtitle",title:"This is some post title",image:"https://kooper.ai/media/home/real-time-optimisation/photo-1591696205602-2f950c417cb9-600.jpeg",groups:[],time_to_read_in_min:5,uri:"#"};try{const e=await fetch(`${t}/${window.KooperAI.clientHash}.json`),n=await e.json();return n.uri=t,n}catch(t){console.error(t)}},handleFunction(t,e){if(t&&window.KooperAI.functions[t])try{const n=window.KooperAI.functions[t](...e);n instanceof Promise&&n.catch((t=>{console.error(t)}))}catch(t){console.error(t)}},mapItems:t=>t.map((t=>({title:t.title?t.title:"",subtitle:t.subtitle?t.subtitle:"",description:t.description?t.description:"",author:t.author,date_in_millis:t.date_in_millis,groups:t.groups?t.groups:[],image:t.image?t.image:"#",time_to_read_in_min:t.time_to_read_in_min,uri:t.uri})))};function st(t,e,n){const i=t.slice();return i[11]=e[n],i}function ct(e){let n;return{c(){n=d("div"),n.textContent="Loading...",m(n,"class","kaiWidget--loading")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function at(t){let e,n,i,o,r,s,c,g,$;return g=new ot({props:{itemsPerView:t[0],$$slots:{default:[ut]},$$scope:{ctx:t}}}),{c(){e=d("div"),n=d("header"),i=d("div"),o=f(t[1]),r=p(),s=d("div"),c=d("div"),C(g.$$.fragment),m(i,"class","kaiWidget--header-title"),m(n,"class","kaiWidget--header"),m(c,"class","kaiWidget--list"),m(s,"class","kaiWidget--body"),m(e,"class","kaiWidget")},m(t,u){l(t,e,u),a(e,n),a(n,i),a(i,o),a(e,r),a(e,s),a(s,c),M(g,c,null),$=!0},p(t,e){(!$||2&e)&&h(o,t[1]);const n={};1&e&&(n.itemsPerView=t[0]),16420&e&&(n.$$scope={dirty:e,ctx:t}),g.$set(n)},i(t){$||(K(g.$$.fragment,t),$=!0)},o(t){T(g.$$.fragment,t),$=!1},d(t){t&&u(e),N(g)}}}function lt(t){let e,n,i,o,r,s,c,g,$,y,w,v,_,k,b,x,A,I,W,E,P=t[11].title+"",j=t[11].subtitle+"",V=t[11].description+"";return{c(){e=d("div"),n=d("div"),i=d("img"),s=p(),c=d("div"),g=d("div"),$=f(P),y=p(),w=d("div"),v=f(j),_=p(),k=d("div"),b=f(V),x=p(),A=d("a"),I=f(t[2]),E=p(),m(i,"draggable","false"),i.src!==(o=t[11].image)&&m(i,"src",o),m(i,"alt",r=t[11].title),m(n,"class","kaiWidget--item-head"),m(g,"class","kaiWidget--item-title"),m(w,"class","kaiWidget--item-subtitle"),m(k,"class","kaiWidget--item-description"),m(A,"class","kaiWidget--item-cta"),m(A,"href",W=t[11].uri),m(c,"class","kaiWidget--item-body"),m(e,"class","kaiWidget--item")},m(t,o){l(t,e,o),a(e,n),a(n,i),a(e,s),a(e,c),a(c,g),a(g,$),a(c,y),a(c,w),a(w,v),a(c,_),a(c,k),a(k,b),a(c,x),a(c,A),a(A,I),a(e,E)},p(t,e){32&e&&i.src!==(o=t[11].image)&&m(i,"src",o),32&e&&r!==(r=t[11].title)&&m(i,"alt",r),32&e&&P!==(P=t[11].title+"")&&h($,P),32&e&&j!==(j=t[11].subtitle+"")&&h(v,j),32&e&&V!==(V=t[11].description+"")&&h(b,V),4&e&&h(I,t[2]),32&e&&W!==(W=t[11].uri)&&m(A,"href",W)},d(t){t&&u(e)}}}function ut(t){let e,n=t[5],i=[];for(let e=0;e<n.length;e+=1)i[e]=lt(st(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=f("")},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);l(t,e,n)},p(t,o){if(36&o){let r;for(n=t[5],r=0;r<n.length;r+=1){const s=st(t,n,r);i[r]?i[r].p(s,o):(i[r]=lt(s),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t),t&&u(e)}}}function dt(t){let e,n,o,r,s,c,f,h,g;r=new D({});const $=[at,ct],y=[];function w(t,e){return t[4]?0:1}return f=w(t),h=y[f]=$[f](t),{c(){e=d("link"),n=d("link"),o=p(),C(r.$$.fragment),s=p(),c=d("div"),h.c(),m(e,"rel","stylesheet"),m(e,"type","text/css"),m(e,"href","//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"),m(n,"rel","stylesheet"),m(n,"type","text/css"),m(n,"href","//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"),m(c,"class","kaiWidget_t5")},m(i,u){a(document.head,e),a(document.head,n),l(i,o,u),M(r,i,u),l(i,s,u),l(i,c,u),y[f].m(c,null),t[9](c),g=!0},p(t,[e]){let n=f;f=w(t),f===n?y[f].p(t,e):(V={r:0,c:[],p:V},T(y[n],1,1,(()=>{y[n]=null})),V.r||i(V.c),V=V.p,h=y[f],h?h.p(t,e):(h=y[f]=$[f](t),h.c()),K(h,1),h.m(c,null))},i(t){g||(K(r.$$.fragment,t),K(h),g=!0)},o(t){T(r.$$.fragment,t),T(h),g=!1},d(i){u(e),u(n),i&&u(o),N(r,i),i&&u(s),i&&u(c),y[f].d(),t[9](null)}}}function ft(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function c(t){try{a(i.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((i=i.apply(t,e||[])).next())}))};let o,{title:r="Here are some listings you want to check out"}=e,{groupname:s="any"}=e,{itemcount:c=9}=e,{itemsperview:a=3}=e,{actionname:l="Learn more"}=e,{onloaded:u}=e,d=!1,f=[];return"string"==typeof c&&(c=parseInt(c),isNaN(c)&&(c=9)),"string"==typeof a&&(a=parseInt(a),isNaN(a)&&(a=3)),y((()=>i(void 0,void 0,void 0,(function*(){const t=yield window.KooperAI.services.api.stats(void 0,{group:s});t.stats.sort(((t,e)=>e.visits.all-t.visits.all));const e=[];for(let n=0;n<t.stats.length;n++){const i=t.stats[n],o=yield rt.fetchPageMeta(i.page);o&&e.push(o)}n(5,f=rt.mapItems(e)),n(4,d=!0),rt.handleFunction(u,[o,f])})))),t.$$set=t=>{"title"in t&&n(1,r=t.title),"groupname"in t&&n(7,s=t.groupname),"itemcount"in t&&n(6,c=t.itemcount),"itemsperview"in t&&n(0,a=t.itemsperview),"actionname"in t&&n(2,l=t.actionname),"onloaded"in t&&n(8,u=t.onloaded)},[a,r,l,o,d,f,c,s,u,function(t){v[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class pt extends R{constructor(t){super(),S(this,t,ft,dt,r,{title:1,groupname:7,itemcount:6,itemsperview:0,actionname:2,onloaded:8})}}window.KooperAI.widgets||(window.KooperAI.widgets={}),window.KooperAI.widgets.type5=(t,e)=>{const n=document.getElementById(t);n.innerHTML="",new pt({target:n,props:e})}}();
//# sourceMappingURL=component-type5.js.map
