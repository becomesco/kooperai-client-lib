!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function c(t,e,n,o,i,r,c){const a=function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(e,o,i,r);if(a){const i=s(e,n,o,c);t.p(i,a)}}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let g;function $(t){g=t}function y(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const w=[],v=[],_=[],k=[],b=Promise.resolve();let x=!1;function A(t){_.push(t)}let W=!1;const I=new Set;function E(){if(!W){W=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];$(e),j(e.$$)}for($(null),w.length=0;v.length;)v.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];I.has(e)||(I.add(e),e())}_.length=0}while(w.length);for(;k.length;)k.pop()();x=!1,W=!1,I.clear()}}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const K=new Set;let P;function T(t,e){t&&t.i&&(K.delete(t),t.i(e))}function C(t,e,n,o){if(t&&t.o){if(K.has(t))return;K.add(t),P.c.push((()=>{K.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function M(t,n,r,s){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(n,r),s||A((()=>{const n=a.map(e).filter(i);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(A)}function S(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(w.push(t),x||(x=!0,b.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,i,r,s,c,a,l=[-1]){const d=g;$(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:i.context||[]),callbacks:n(),dirty:l,skip_bound:!1};let p=!1;if(f.ctx=r?r(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&V(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();i.intro&&T(e.$$.fragment),M(e,i.target,i.anchor,i.customElement),E()}$(d)}class q{$destroy(){S(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const N={async fetchPageMeta(t){if(window.KooperAI&&window.KooperAI.mock)return{author:{first_name:"Mock",last_name:"User",image:"https://kooper.ai/icons/icon-512x512.png"},date_in_millis:Date.now(),description:"This is some post description.",subtitle:"This is some post subtitle",title:"This is some post title",image:"https://kooper.ai/media/home/real-time-optimisation/photo-1591696205602-2f950c417cb9-600.jpeg",groups:[],time_to_read_in_min:5,uri:"#"};try{const e=await fetch(`${t}/${window.KooperAI.clientHash}.json`),n=await e.json();return n.uri=t,n}catch(t){console.error(t)}},handleFunction(t,e){if(t&&window.KooperAI.functions[t])try{const n=window.KooperAI.functions[t](...e);n instanceof Promise&&n.catch((t=>{console.error(t)}))}catch(t){console.error(t)}},mapItems:t=>t.map((t=>({title:t.title?t.title:"",subtitle:t.subtitle?t.subtitle:"",description:t.description?t.description:"",author:t.author,date_in_millis:t.date_in_millis,groups:t.groups?t.groups:[],image:t.image?t.image:"#",time_to_read_in_min:t.time_to_read_in_min,uri:t.uri})))};for(var L,R,B=(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}}(R={path:L,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&R.path)}},R.exports),R.exports),F=[],O=0;O<256;++O)F[O]=(O+256).toString(16).substr(1);var H,U,z=function(t,e){var n=e||0,o=F;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")},Y=0,G=0;var J=function(t,e,n){var o=e&&n||0,i=e||[],r=(t=t||{}).node||H,s=void 0!==t.clockseq?t.clockseq:U;if(null==r||null==s){var c=B();null==r&&(r=H=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=U=16383&(c[6]<<8|c[7]))}var a=void 0!==t.msecs?t.msecs:(new Date).getTime(),l=void 0!==t.nsecs?t.nsecs:G+1,u=a-Y+(l-G)/1e4;if(u<0&&void 0===t.clockseq&&(s=s+1&16383),(u<0||a>Y)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Y=a,G=l,U=s;var d=(1e4*(268435455&(a+=122192928e5))+l)%4294967296;i[o++]=d>>>24&255,i[o++]=d>>>16&255,i[o++]=d>>>8&255,i[o++]=255&d;var f=a/4294967296*1e4&268435455;i[o++]=f>>>8&255,i[o++]=255&f,i[o++]=f>>>24&15|16,i[o++]=f>>>16&255,i[o++]=s>>>8|128,i[o++]=255&s;for(var p=0;p<6;++p)i[o+p]=r[p];return e||z(i)};var Q=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||B)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var r=0;r<16;++r)e[o+r]=i[r];return e||z(i)},X=Q;X.v1=J,X.v4=Q;var Z=X;function tt(t){let e,n;const o=t[3].default,i=function(t,e,n,o){if(t){const i=s(t,e,n,o);return t[0](i)}}(o,t,t[2],null);return{c(){e=d("div"),i&&i.c(),m(e,"id",t[0])},m(t,o){l(t,e,o),i&&i.m(e,null),n=!0},p(t,[r]){i&&i.p&&4&r&&c(i,o,t,t[2],r,null,null),(!n||1&r)&&m(e,"id",t[0])},i(t){n||(T(i,t),n=!0)},o(t){C(i,t),n=!1},d(t){t&&u(e),i&&i.d(t)}}}function et(t,e,n){let{$$slots:o={},$$scope:i}=e,{id:r=Z.v4()}=e,{itemsPerView:s=1}=e;console.log(s);const c={dots:!0,infinite:!0,speed:500,slidesToShow:s,slidesToScroll:s,autoPlay:!0,autoplaySpeed:2e3,cssEase:"linear",arrows:!1};let a=null;return y((()=>{(a||(a=document.getElementById(r),a))&&window.$(a).slick(c)})),t.$$set=t=>{"id"in t&&n(0,r=t.id),"itemsPerView"in t&&n(1,s=t.itemsPerView),"$$scope"in t&&n(2,i=t.$$scope)},[r,s,i,o]}class nt extends q{constructor(t){super(),D(this,t,et,tt,r,{id:0,itemsPerView:1})}}function ot(t,e,n){const o=t.slice();return o[9]=e[n],o}function it(e){let n;return{c(){n=d("div"),n.textContent="Loading..."},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function rt(t){let e,n,o,i,r,s,c,g;return c=new nt({props:{$$slots:{default:[lt]},$$scope:{ctx:t}}}),{c(){var a;e=d("header"),n=d("div"),o=f(t[0]),i=p(),r=d("div"),s=d("ul"),(a=c.$$.fragment)&&a.c(),m(n,"class","kaiWidget--header-title"),m(e,"class","kaiWidget--header"),m(s,"class","kaiWidget--list"),m(r,"class","kaiWidget--body")},m(t,u){l(t,e,u),a(e,n),a(n,o),l(t,i,u),l(t,r,u),a(r,s),M(c,s,null),g=!0},p(t,e){(!g||1&e)&&h(o,t[0]);const n={};4104&e&&(n.$$scope={dirty:e,ctx:t}),c.$set(n)},i(t){g||(T(c.$$.fragment,t),g=!0)},o(t){C(c.$$.fragment,t),g=!1},d(t){t&&u(e),t&&u(i),t&&u(r),S(c)}}}function st(t){let e,n,o,i,r,s=t[9].author.first_name+"",c=t[9].author.last_name+"",m=t[9].author.image&&ct(t);return{c(){m&&m.c(),e=p(),n=d("span"),o=f(s),i=p(),r=f(c)},m(t,s){m&&m.m(t,s),l(t,e,s),l(t,n,s),a(n,o),a(n,i),a(n,r)},p(t,n){t[9].author.image?m?m.p(t,n):(m=ct(t),m.c(),m.m(e.parentNode,e)):m&&(m.d(1),m=null),8&n&&s!==(s=t[9].author.first_name+"")&&h(o,s),8&n&&c!==(c=t[9].author.last_name+"")&&h(r,c)},d(t){m&&m.d(t),t&&u(e),t&&u(n)}}}function ct(t){let e,n;return{c(){e=d("img"),m(e,"draggable","false"),e.src!==(n=t[9].author.image)&&m(e,"src",n),m(e,"alt","Author")},m(t,n){l(t,e,n)},p(t,o){8&o&&e.src!==(n=t[9].author.image)&&m(e,"src",n)},d(t){t&&u(e)}}}function at(t){let e,n,o,i,r,s,c,g,$,y,w,v,_,k,b,x,A,W,I,E,j=t[9].title+"",K=t[9].description+"",P=new Date(t[9].date_in_millis).toLocaleDateString()+"",T=t[9].author&&st(t);return{c(){e=d("li"),n=d("a"),o=d("div"),i=d("div"),r=f(j),s=p(),c=d("div"),g=f(K),$=p(),y=d("div"),w=d("div"),T&&T.c(),v=p(),_=d("div"),k=f(P),b=p(),x=d("div"),A=d("img"),E=p(),m(i,"class","kaiWidget--item-title"),m(c,"class","kaiWidget--item-description"),m(w,"class","kaiWidget--item-author"),m(_,"class","kaiWidget--item-date"),m(y,"class","kaiWidget--item-info"),m(o,"class","kaiWidget--item-content"),A.src!==(W=t[9].image)&&m(A,"src",W),m(A,"alt",""),m(x,"class","kaiWidget--item-visual"),m(n,"class","kaiWidget--item-link"),m(n,"href",I=t[9].uri),m(e,"class","kaiWidget--item")},m(t,u){l(t,e,u),a(e,n),a(n,o),a(o,i),a(i,r),a(o,s),a(o,c),a(c,g),a(o,$),a(o,y),a(y,w),T&&T.m(w,null),a(y,v),a(y,_),a(_,k),a(n,b),a(n,x),a(x,A),a(e,E)},p(t,e){8&e&&j!==(j=t[9].title+"")&&h(r,j),8&e&&K!==(K=t[9].description+"")&&h(g,K),t[9].author?T?T.p(t,e):(T=st(t),T.c(),T.m(w,null)):T&&(T.d(1),T=null),8&e&&P!==(P=new Date(t[9].date_in_millis).toLocaleDateString()+"")&&h(k,P),8&e&&A.src!==(W=t[9].image)&&m(A,"src",W),8&e&&I!==(I=t[9].uri)&&m(n,"href",I)},d(t){t&&u(e),T&&T.d()}}}function lt(t){let e,n=t[3],o=[];for(let e=0;e<n.length;e+=1)o[e]=at(ot(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f("")},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,i){if(8&i){let r;for(n=t[3],r=0;r<n.length;r+=1){const s=ot(t,n,r);o[r]?o[r].p(s,i):(o[r]=at(s),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t),t&&u(e)}}}function ut(t){let e,n,i,r,s,c,f,h;const g=[rt,it],$=[];function y(t,e){return t[2]?0:1}return c=y(t),f=$[c]=g[c](t),{c(){e=d("link"),n=d("link"),i=p(),r=d("div"),s=d("div"),f.c(),m(e,"rel","stylesheet"),m(e,"type","text/css"),m(e,"href","//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"),m(n,"rel","stylesheet"),m(n,"type","text/css"),m(n,"href","//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"),m(s,"class","kaiWidget"),m(r,"class","kaiWidget_t4")},m(o,u){a(document.head,e),a(document.head,n),l(o,i,u),l(o,r,u),a(r,s),$[c].m(s,null),t[7](s),h=!0},p(t,[e]){let n=c;c=y(t),c===n?$[c].p(t,e):(P={r:0,c:[],p:P},C($[n],1,1,(()=>{$[n]=null})),P.r||o(P.c),P=P.p,f=$[c],f?f.p(t,e):(f=$[c]=g[c](t),f.c()),T(f,1),f.m(s,null))},i(t){h||(T(f),h=!0)},o(t){C(f),h=!1},d(o){u(e),u(n),o&&u(i),o&&u(r),$[c].d(),t[7](null)}}}function dt(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function c(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((o=o.apply(t,e||[])).next())}))};let i,{title:r="You might want to take a look at these"}=e,{groupname:s="any"}=e,{itemcount:c=9}=e,{onloaded:a}=e,l=!1,u=[];return y((()=>o(void 0,void 0,void 0,(function*(){const t=yield window.KooperAI.services.api.stats(void 0,{group:s});t.stats.sort(((t,e)=>e.visits.all-t.visits.all));const e=[];for(let n=0;n<t.stats.length;n++){const o=t.stats[n],i=yield N.fetchPageMeta(o.page);i&&e.push(i)}n(3,u=e),n(2,l=!0),N.handleFunction(a,[i,u])})))),t.$$set=t=>{"title"in t&&n(0,r=t.title),"groupname"in t&&n(4,s=t.groupname),"itemcount"in t&&n(5,c=t.itemcount),"onloaded"in t&&n(6,a=t.onloaded)},[r,i,l,u,s,c,a,function(t){v[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class ft extends q{constructor(t){super(),D(this,t,dt,ut,r,{title:0,groupname:4,itemcount:5,onloaded:6})}}window.KooperAI||(window.KooperAI={}),window.KooperAI.widgets||(window.KooperAI.widgets={}),window.KooperAI.widgets.type4=(t,e)=>{const n=document.getElementById(t);n.innerHTML="",new ft({target:n,props:e})}}();
//# sourceMappingURL=component-type4.js.map
