!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function a(t,e,n,i,o,r,a){const c=function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(e,i,o,r);if(c){const o=s(e,n,i,a);t.p(o,c)}}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function m(){return f(" ")}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let g;function _(t){g=t}function $(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const v=[],y=[],w=[],k=[],b=Promise.resolve();let x=!1;function A(t){w.push(t)}let W=!1;const I=new Set;function E(){if(!W){W=!0;do{for(let t=0;t<v.length;t+=1){const e=v[t];_(e),j(e.$$)}for(_(null),v.length=0;y.length;)y.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];I.has(e)||(I.add(e),e())}w.length=0}while(v.length);for(;k.length;)k.pop()();x=!1,W=!1,I.clear()}}function j(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const K=new Set;let P;function M(t,e){t&&t.i&&(K.delete(t),t.i(e))}function T(t,e,n,i){if(t&&t.o){if(K.has(t))return;K.add(t),P.c.push((()=>{K.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function C(t,n,r,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,r),s||A((()=>{const n=c.map(e).filter(o);l?l.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(A)}function S(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(v.push(t),x||(x=!0,b.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,r,s,a,c,l=[-1]){const d=g;_(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:o.context||[]),callbacks:n(),dirty:l,skip_bound:!1};let m=!1;if(f.ctx=r?r(e,o.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&V(e,t)),n})):[],f.update(),m=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();o.intro&&M(e.$$.fragment),C(e,o.target,o.anchor,o.customElement),E()}_(d)}class q{$destroy(){S(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}for(var N,R,B=(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}}(R={path:N,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&R.path)}},R.exports),R.exports),F=[],O=0;O<256;++O)F[O]=(O+256).toString(16).substr(1);var H,L,U=function(t,e){var n=e||0,i=F;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")},z=0,G=0;var J=function(t,e,n){var i=e&&n||0,o=e||[],r=(t=t||{}).node||H,s=void 0!==t.clockseq?t.clockseq:L;if(null==r||null==s){var a=B();null==r&&(r=H=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=L=16383&(a[6]<<8|a[7]))}var c=void 0!==t.msecs?t.msecs:(new Date).getTime(),l=void 0!==t.nsecs?t.nsecs:G+1,u=c-z+(l-G)/1e4;if(u<0&&void 0===t.clockseq&&(s=s+1&16383),(u<0||c>z)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");z=c,G=l,L=s;var d=(1e4*(268435455&(c+=122192928e5))+l)%4294967296;o[i++]=d>>>24&255,o[i++]=d>>>16&255,o[i++]=d>>>8&255,o[i++]=255&d;var f=c/4294967296*1e4&268435455;o[i++]=f>>>8&255,o[i++]=255&f,o[i++]=f>>>24&15|16,o[i++]=f>>>16&255,o[i++]=s>>>8|128,o[i++]=255&s;for(var m=0;m<6;++m)o[i+m]=r[m];return e||U(o)};var Q=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||B)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var r=0;r<16;++r)e[i+r]=o[r];return e||U(o)},X=Q;X.v1=J,X.v4=Q;var Y=X;function Z(t){let e,n;const i=t[3].default,o=function(t,e,n,i){if(t){const o=s(t,e,n,i);return t[0](o)}}(i,t,t[2],null);return{c(){e=d("div"),o&&o.c(),p(e,"id",t[0])},m(t,i){l(t,e,i),o&&o.m(e,null),n=!0},p(t,[r]){o&&o.p&&4&r&&a(o,i,t,t[2],r,null,null),(!n||1&r)&&p(e,"id",t[0])},i(t){n||(M(o,t),n=!0)},o(t){T(o,t),n=!1},d(t){t&&u(e),o&&o.d(t)}}}function tt(t,e,n){let{$$slots:i={},$$scope:o}=e,{id:r=Y.v4()}=e,{itemsPerView:s=1}=e;console.log(s);const a={dots:!0,infinite:!0,speed:500,slidesToShow:s,slidesToScroll:s,autoPlay:!0,autoplaySpeed:2e3,cssEase:"linear",arrows:!1};let c=null;return $((()=>{(c||(c=document.getElementById(r),c))&&window.$(c).slick(a)})),t.$$set=t=>{"id"in t&&n(0,r=t.id),"itemsPerView"in t&&n(1,s=t.itemsPerView),"$$scope"in t&&n(2,o=t.$$scope)},[r,s,o,i]}class et extends q{constructor(t){super(),D(this,t,tt,Z,r,{id:0,itemsPerView:1})}}const nt={async fetchPageMeta(t){if(window.KooperAI&&window.KooperAI.mock)return{author:{first_name:"Mock",last_name:"User",image:"https://kooper.ai/icons/icon-512x512.png"},date_in_millis:Date.now(),description:"This is some post description.",subtitle:"This is some post subtitle",title:"This is some post title",image:"https://kooper.ai/media/home/real-time-optimisation/photo-1591696205602-2f950c417cb9-600.jpeg",groups:[],time_to_read_in_min:5,uri:"#"};try{const e=await fetch(`${t}/${window.KooperAI.clientHash}.json`),n=await e.json();return n.uri=t,n}catch(t){console.error(t)}},handleFunction(t,e){if(t&&window.KooperAI.functions[t])try{const n=window.KooperAI.functions[t](...e);n instanceof Promise&&n.catch((t=>{console.error(t)}))}catch(t){console.error(t)}},mapItems:t=>t.map((t=>({title:t.title?t.title:"",subtitle:t.subtitle?t.subtitle:"",description:t.description?t.description:"",author:t.author,date_in_millis:t.date_in_millis,groups:t.groups?t.groups:[],image:t.image?t.image:"#",time_to_read_in_min:t.time_to_read_in_min,uri:t.uri})))};function it(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}function ot(e){let n;return{c(){n=d("div"),n.textContent="Loading..."},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function rt(t){let e,n,i,o,r,s,a,g;return a=new et({props:{$$slots:{default:[ct]},$$scope:{ctx:t}}}),{c(){var c;e=d("header"),n=d("div"),i=f(t[0]),o=m(),r=d("div"),s=d("div"),(c=a.$$.fragment)&&c.c(),p(n,"class","kaiWidget--header-title"),p(e,"class","kaiWidget--header"),p(s,"class","kaiWidget--list"),p(r,"class","kaiWidget--body")},m(t,u){l(t,e,u),c(e,n),c(n,i),l(t,o,u),l(t,r,u),c(r,s),C(a,s,null),g=!0},p(t,e){(!g||1&e)&&h(i,t[0]);const n={};4100&e&&(n.$$scope={dirty:e,ctx:t}),a.$set(n)},i(t){g||(M(a.$$.fragment,t),g=!0)},o(t){T(a.$$.fragment,t),g=!1},d(t){t&&u(e),t&&u(o),t&&u(r),S(a)}}}function st(t){let e,n,i,o,r,s,a,g=(t[9].author?t[9].author.first_name:"")+"",_=(t[9].author?t[9].author.last_name:"")+"";return{c(){e=d("img"),i=m(),o=d("p"),r=f(g),s=m(),a=f(_),p(e,"draggable","false"),e.src!==(n=t[9].author.image)&&p(e,"src",n),p(e,"alt","Author avatar")},m(t,n){l(t,e,n),l(t,i,n),l(t,o,n),c(o,r),c(o,s),c(o,a)},p(t,i){4&i&&e.src!==(n=t[9].author.image)&&p(e,"src",n),4&i&&g!==(g=(t[9].author?t[9].author.first_name:"")+"")&&h(r,g),4&i&&_!==(_=(t[9].author?t[9].author.last_name:"")+"")&&h(a,_)},d(t){t&&u(e),t&&u(i),t&&u(o)}}}function at(t){let e,n,i,o,r,s,a,g,_,$,v,y,w,k,b,x,A,W,I,E,j,K,P,M,T,C,S,V=t[9].title+"",D=(t[9].date_in_millis?new Date(t[9].date_in_millis).toDateString():"")+"",q=t[9].description+"",N=t[9].time_to_read_in_min?`${t[9].time_to_read_in_min}min`:"",R=t[9].author&&t[9].author.image&&st(t);return{c(){e=d("div"),n=d("div"),i=d("div"),o=d("div"),r=f(V),s=m(),a=d("div"),g=d("div"),R&&R.c(),_=m(),$=d("div"),v=f(D),y=m(),w=d("div"),k=f(q),b=m(),x=d("div"),A=d("a"),W=f("Read More"),E=m(),j=d("span"),K=f(N),P=m(),M=d("div"),T=d("img"),S=m(),p(o,"class","kaiWidget--item-title"),p(g,"class","kaiWidget--item-author"),p($,"class","kaiWidget--item-date"),p(a,"class","kaiWidget--item-info"),p(w,"class","kaiWidget--item-description"),p(A,"class","kaiWidget--item-cta"),p(A,"href",I=t[9].uri),p(j,"class","kaiWidget--item-data"),p(x,"class","kaiWidget--item-actions"),p(i,"class","kaiWidget--item-content"),p(T,"draggable","false"),T.src!==(C=t[9].image)&&p(T,"src",C),p(T,"alt",""),p(M,"class","kaiWidget--item-visual"),p(n,"class","kaiWidget--item-inner"),p(e,"class","kaiWidget--item")},m(t,u){l(t,e,u),c(e,n),c(n,i),c(i,o),c(o,r),c(i,s),c(i,a),c(a,g),R&&R.m(g,null),c(a,_),c(a,$),c($,v),c(i,y),c(i,w),c(w,k),c(i,b),c(i,x),c(x,A),c(A,W),c(x,E),c(x,j),c(j,K),c(n,P),c(n,M),c(M,T),c(e,S)},p(t,e){4&e&&V!==(V=t[9].title+"")&&h(r,V),t[9].author&&t[9].author.image?R?R.p(t,e):(R=st(t),R.c(),R.m(g,null)):R&&(R.d(1),R=null),4&e&&D!==(D=(t[9].date_in_millis?new Date(t[9].date_in_millis).toDateString():"")+"")&&h(v,D),4&e&&q!==(q=t[9].description+"")&&h(k,q),4&e&&I!==(I=t[9].uri)&&p(A,"href",I),4&e&&N!==(N=t[9].time_to_read_in_min?`${t[9].time_to_read_in_min}min`:"")&&h(K,N),4&e&&T.src!==(C=t[9].image)&&p(T,"src",C)},d(t){t&&u(e),R&&R.d()}}}function ct(t){let e,n=t[2],i=[];for(let e=0;e<n.length;e+=1)i[e]=at(it(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=f("")},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);l(t,e,n)},p(t,o){if(4&o){let r;for(n=t[2],r=0;r<n.length;r+=1){const s=it(t,n,r);i[r]?i[r].p(s,o):(i[r]=at(s),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t),t&&u(e)}}}function lt(t){let e,n,o,r,s,a,f,h;const g=[rt,ot],_=[];function $(t,e){return t[3]?0:1}return a=$(t),f=_[a]=g[a](t),{c(){e=d("link"),n=d("link"),o=m(),r=d("div"),s=d("div"),f.c(),p(e,"rel","stylesheet"),p(e,"type","text/css"),p(e,"href","//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"),p(n,"rel","stylesheet"),p(n,"type","text/css"),p(n,"href","//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"),p(s,"class","kaiWidget"),p(r,"class","kaiWidget_t2")},m(i,u){c(document.head,e),c(document.head,n),l(i,o,u),l(i,r,u),c(r,s),_[a].m(s,null),t[7](s),h=!0},p(t,[e]){let n=a;a=$(t),a===n?_[a].p(t,e):(P={r:0,c:[],p:P},T(_[n],1,1,(()=>{_[n]=null})),P.r||i(P.c),P=P.p,f=_[a],f?f.p(t,e):(f=_[a]=g[a](t),f.c()),M(f,1),f.m(s,null))},i(t){h||(M(f),h=!0)},o(t){T(f),h=!1},d(i){u(e),u(n),i&&u(o),i&&u(r),_[a].d(),t[7](null)}}}function ut(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};let o,{title:r="Best reads from the topics you follow"}=e,{groupname:s="any"}=e,{itemcount:a=9}=e,{onloaded:c}=e;"string"==typeof a&&(a=parseInt(a),isNaN(a)&&(a=9));let l=[],u=!1;return $((()=>i(void 0,void 0,void 0,(function*(){const t=yield window.KooperAI.services.api.stats(void 0,{group:s});t.stats.sort(((t,e)=>e.visits.all-t.visits.all));const e=[];for(let n=0;n<t.stats.length;n++){const i=t.stats[n],o=yield nt.fetchPageMeta(i.page);o&&e.push(o)}n(2,l=e),n(3,u=!0),nt.handleFunction(c,[o,l])})))),t.$$set=t=>{"title"in t&&n(0,r=t.title),"groupname"in t&&n(5,s=t.groupname),"itemcount"in t&&n(4,a=t.itemcount),"onloaded"in t&&n(6,c=t.onloaded)},[r,o,l,u,a,s,c,function(t){y[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class dt extends q{constructor(t){super(),D(this,t,ut,lt,r,{title:0,groupname:5,itemcount:4,onloaded:6})}}window.KooperAI||(window.KooperAI={}),window.KooperAI.widgets||(window.KooperAI.widgets={}),window.KooperAI.widgets.type2=(t,e)=>{const n=document.getElementById(t);n.innerHTML="",new dt({target:n,props:e})}}();
//# sourceMappingURL=component-type2.js.map
