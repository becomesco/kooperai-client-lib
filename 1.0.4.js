!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=1)}([function(e,n,t){"use strict";var r;t.r(n),t.d(n,"v1",(function(){return h})),t.d(n,"v3",(function(){return A})),t.d(n,"v4",(function(){return O})),t.d(n,"v5",(function(){return M})),t.d(n,"NIL",(function(){return P})),t.d(n,"version",(function(){return E})),t.d(n,"validate",(function(){return u})),t.d(n,"stringify",(function(){return p})),t.d(n,"parse",(function(){return y}));var o=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(e){return"string"==typeof e&&a.test(e)},c=[],s=0;s<256;++s)c.push((s+256).toString(16).substr(1));var f,l,p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase();if(!u(t))throw TypeError("Stringified UUID is invalid");return t},d=0,v=0;var h=function(e,n,t){var r=n&&t||0,o=n||new Array(16),a=(e=e||{}).node||f,u=void 0!==e.clockseq?e.clockseq:l;if(null==a||null==u){var c=e.random||(e.rng||i)();null==a&&(a=f=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==u&&(u=l=16383&(c[6]<<8|c[7]))}var s=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:v+1,y=s-d+(h-v)/1e4;if(y<0&&void 0===e.clockseq&&(u=u+1&16383),(y<0||s>d)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=s,v=h,l=u;var w=(1e4*(268435455&(s+=122192928e5))+h)%4294967296;o[r++]=w>>>24&255,o[r++]=w>>>16&255,o[r++]=w>>>8&255,o[r++]=255&w;var g=s/4294967296*1e4&268435455;o[r++]=g>>>8&255,o[r++]=255&g,o[r++]=g>>>24&15|16,o[r++]=g>>>16&255,o[r++]=u>>>8|128,o[r++]=255&u;for(var b=0;b<6;++b)o[r+b]=a[b];return n||p(o)};var y=function(e){if(!u(e))throw TypeError("Invalid UUID");var n,t=new Uint8Array(16);return t[0]=(n=parseInt(e.slice(0,8),16))>>>24,t[1]=n>>>16&255,t[2]=n>>>8&255,t[3]=255&n,t[4]=(n=parseInt(e.slice(9,13),16))>>>8,t[5]=255&n,t[6]=(n=parseInt(e.slice(14,18),16))>>>8,t[7]=255&n,t[8]=(n=parseInt(e.slice(19,23),16))>>>8,t[9]=255&n,t[10]=(n=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=n/4294967296&255,t[12]=n>>>24&255,t[13]=n>>>16&255,t[14]=n>>>8&255,t[15]=255&n,t};var w=function(e,n,t){function r(e,r,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var n=[],t=0;t<e.length;++t)n.push(e.charCodeAt(t));return n}(e)),"string"==typeof r&&(r=y(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=t(a))[6]=15&a[6]|n,a[8]=63&a[8]|128,o){i=i||0;for(var u=0;u<16;++u)o[i+u]=a[u];return o}return p(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function g(e){return 14+(e+64>>>9<<4)+1}function b(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}function m(e,n,t,r,o,i){return b((a=b(b(n,e),b(r,i)))<<(u=o)|a>>>32-u,t);var a,u}function _(e,n,t,r,o,i,a){return m(n&t|~n&r,e,n,o,i,a)}function k(e,n,t,r,o,i,a){return m(n&r|t&~r,e,n,o,i,a)}function S(e,n,t,r,o,i,a){return m(n^t^r,e,n,o,i,a)}function I(e,n,t,r,o,i,a){return m(t^(n|~r),e,n,o,i,a)}var A=w("v3",48,(function(e){if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=new Uint8Array(n.length);for(var t=0;t<n.length;++t)e[t]=n.charCodeAt(t)}return function(e){for(var n=[],t=32*e.length,r=0;r<t;r+=8){var o=e[r>>5]>>>r%32&255,i=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);n.push(i)}return n}(function(e,n){e[n>>5]|=128<<n%32,e[g(n)-1]=n;for(var t=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var u=t,c=r,s=o,f=i;t=_(t,r,o,i,e[a],7,-680876936),i=_(i,t,r,o,e[a+1],12,-389564586),o=_(o,i,t,r,e[a+2],17,606105819),r=_(r,o,i,t,e[a+3],22,-1044525330),t=_(t,r,o,i,e[a+4],7,-176418897),i=_(i,t,r,o,e[a+5],12,1200080426),o=_(o,i,t,r,e[a+6],17,-1473231341),r=_(r,o,i,t,e[a+7],22,-45705983),t=_(t,r,o,i,e[a+8],7,1770035416),i=_(i,t,r,o,e[a+9],12,-1958414417),o=_(o,i,t,r,e[a+10],17,-42063),r=_(r,o,i,t,e[a+11],22,-1990404162),t=_(t,r,o,i,e[a+12],7,1804603682),i=_(i,t,r,o,e[a+13],12,-40341101),o=_(o,i,t,r,e[a+14],17,-1502002290),r=_(r,o,i,t,e[a+15],22,1236535329),t=k(t,r,o,i,e[a+1],5,-165796510),i=k(i,t,r,o,e[a+6],9,-1069501632),o=k(o,i,t,r,e[a+11],14,643717713),r=k(r,o,i,t,e[a],20,-373897302),t=k(t,r,o,i,e[a+5],5,-701558691),i=k(i,t,r,o,e[a+10],9,38016083),o=k(o,i,t,r,e[a+15],14,-660478335),r=k(r,o,i,t,e[a+4],20,-405537848),t=k(t,r,o,i,e[a+9],5,568446438),i=k(i,t,r,o,e[a+14],9,-1019803690),o=k(o,i,t,r,e[a+3],14,-187363961),r=k(r,o,i,t,e[a+8],20,1163531501),t=k(t,r,o,i,e[a+13],5,-1444681467),i=k(i,t,r,o,e[a+2],9,-51403784),o=k(o,i,t,r,e[a+7],14,1735328473),r=k(r,o,i,t,e[a+12],20,-1926607734),t=S(t,r,o,i,e[a+5],4,-378558),i=S(i,t,r,o,e[a+8],11,-2022574463),o=S(o,i,t,r,e[a+11],16,1839030562),r=S(r,o,i,t,e[a+14],23,-35309556),t=S(t,r,o,i,e[a+1],4,-1530992060),i=S(i,t,r,o,e[a+4],11,1272893353),o=S(o,i,t,r,e[a+7],16,-155497632),r=S(r,o,i,t,e[a+10],23,-1094730640),t=S(t,r,o,i,e[a+13],4,681279174),i=S(i,t,r,o,e[a],11,-358537222),o=S(o,i,t,r,e[a+3],16,-722521979),r=S(r,o,i,t,e[a+6],23,76029189),t=S(t,r,o,i,e[a+9],4,-640364487),i=S(i,t,r,o,e[a+12],11,-421815835),o=S(o,i,t,r,e[a+15],16,530742520),r=S(r,o,i,t,e[a+2],23,-995338651),t=I(t,r,o,i,e[a],6,-198630844),i=I(i,t,r,o,e[a+7],10,1126891415),o=I(o,i,t,r,e[a+14],15,-1416354905),r=I(r,o,i,t,e[a+5],21,-57434055),t=I(t,r,o,i,e[a+12],6,1700485571),i=I(i,t,r,o,e[a+3],10,-1894986606),o=I(o,i,t,r,e[a+10],15,-1051523),r=I(r,o,i,t,e[a+1],21,-2054922799),t=I(t,r,o,i,e[a+8],6,1873313359),i=I(i,t,r,o,e[a+15],10,-30611744),o=I(o,i,t,r,e[a+6],15,-1560198380),r=I(r,o,i,t,e[a+13],21,1309151649),t=I(t,r,o,i,e[a+4],6,-145523070),i=I(i,t,r,o,e[a+11],10,-1120210379),o=I(o,i,t,r,e[a+2],15,718787259),r=I(r,o,i,t,e[a+9],21,-343485551),t=b(t,u),r=b(r,c),o=b(o,s),i=b(i,f)}return[t,r,o,i]}(function(e){if(0===e.length)return[];for(var n=8*e.length,t=new Uint32Array(g(n)),r=0;r<n;r+=8)t[r>>5]|=(255&e[r/8])<<r%32;return t}(e),8*e.length))}));var O=function(e,n,t){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var o=0;o<16;++o)n[t+o]=r[o];return n}return p(r)};function j(e,n,t,r){switch(e){case 0:return n&t^~n&r;case 1:return n^t^r;case 2:return n&t^n&r^t&r;case 3:return n^t^r}}function T(e,n){return e<<n|e>>>32-n}var M=w("v5",80,(function(e){var n=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var o=0;o<r.length;++o)e.push(r.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),u=new Array(a),c=0;c<a;++c){for(var s=new Uint32Array(16),f=0;f<16;++f)s[f]=e[64*c+4*f]<<24|e[64*c+4*f+1]<<16|e[64*c+4*f+2]<<8|e[64*c+4*f+3];u[c]=s}u[a-1][14]=8*(e.length-1)/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<a;++l){for(var p=new Uint32Array(80),d=0;d<16;++d)p[d]=u[l][d];for(var v=16;v<80;++v)p[v]=T(p[v-3]^p[v-8]^p[v-14]^p[v-16],1);for(var h=t[0],y=t[1],w=t[2],g=t[3],b=t[4],m=0;m<80;++m){var _=Math.floor(m/20),k=T(h,5)+j(_,y,w,g)+b+n[_]+p[m]>>>0;b=g,g=w,w=T(y,30)>>>0,y=h,h=k}t[0]=t[0]+h>>>0,t[1]=t[1]+y>>>0,t[2]=t[2]+w>>>0,t[3]=t[3]+g>>>0,t[4]=t[4]+b>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,255&t[0],t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,255&t[1],t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,255&t[2],t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,255&t[3],t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,255&t[4]]})),P="00000000-0000-0000-0000-000000000000";var E=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var o=t(2);function i(){var e=window.kaiHash?window.kaiHash:"__kooperai_client_hash__",n=(window.kaiHost,window.kaiHost),t=window.kaiEnvId?window.kaiEnvId:"__kooperai_env_id__",i={id:window.kaiKeyId?window.kaiKeyId:"__kooperai_key_id__",secret:window.kaiKeySecret?window.kaiKeySecret:"__kooperai_key_secret__"},a=o.Security(i),u=o.APIService(n,a,t),c=o.KooperAILocalStorageService(),s=o.LocationService(),f=o.TrackerService(c,s),l=o.EventManager(s),p=window.kaiProjects?window.kaiProjects:JSON.parse("__kooperai_projects__"),d=l.subscribe("load",(function(){if(f.firstVisit())u.track({origin:window.location.origin,type:"ENTER",userHash:f.userHash(),page:{from:"",on:s.path()}}).then((function(){d()})).catch((function(e){console.error(e),d()}));else{var e=f.vector.all(),n=e[e.length-1];if(n){var t=s.path();if(t!==n.on){var r={from:n.on,on:""+t,timestamp:Date.now()};f.vector.push(r),u.track({origin:window.location.origin,type:"TRANSITION",userHash:f.userHash(),page:{from:r.from,on:r.on}}).catch((function(e){console.error(e)}))}}}}));l.subscribe("page_change",(function(e){f.vector.push(e),u.track({origin:window.location.origin,type:"TRANSITION",userHash:f.userHash(),page:{from:e.from,on:e.on}}).then((function(){window.KooperAI.loader&&window.KooperAI.loader().catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))}));var v={vectors:function(){return f.vector.all()},projects:function(){return p},clientHash:e,services:{api:u}};window.KooperAI?window.KooperAI=r(r({},window.KooperAI),v):window.KooperAI=v}i(),window.KooperAIInit=i},function(e,n,t){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),o=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||n.hasOwnProperty(t)||r(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),o(t(3),n),o(t(4),n),o(t(5),n),o(t(6),n),o(t(7),n),o(t(8),n)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.KooperAILocalStorageService=void 0,n.KooperAILocalStorageService=function(){return{get:function(e){var n=localStorage.getItem("kai"+e);if(n)try{return JSON.parse(n)}catch(e){return n}},set:function(e,n){"object"==typeof n?localStorage.setItem("kai"+e,JSON.stringify(n)):localStorage.setItem("kai"+e,n)},remove:function(e){localStorage.removeItem("kai"+e)},clear:function(){var e=JSON.parse(JSON.stringify(localStorage));for(var n in e)n.startsWith("kai")&&localStorage.removeItem(n)}}}},function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,u)}c((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Security=void 0,n.Security=function(e){var n,t=this,i="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM",a=function(e){return r(t,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,crypto.subtle.importKey("raw",(new TextEncoder).encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"])];case 1:return[2,n.sent()]}}))}))},u=function(e,n){return Math.random()*(n-e)+e},c={randomString:function(e){for(var n="",t=0;t<e;t++)n+=i.charAt(u(0,i.length));return n},sign:function(t){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return n?[3,2]:[4,a(e.secret)];case 1:n=o.sent(),o.label=2;case 2:return r={nonce:c.randomString(8),timestamp:Date.now(),key:e.id,signature:""},[4,crypto.subtle.sign("HMAC",n,(new TextEncoder).encode(r.nonce+r.timestamp+r.key+t))];case 3:return i=o.sent(),new Uint8Array(i).forEach((function(e){e<16&&(r.signature+=0),r.signature+=e.toString(16)})),[2,r]}}))}))}};return c}},function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,u)}c((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.APIService=void 0,n.APIService=function(e,n,t){var a={send:function(t){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return t.payload||(t.payload={}),[4,n.sign(JSON.stringify(t.payload))];case 1:return r=o.sent(),[4,fetch(""+e+t.uri,{method:t.method,headers:{"Content-Type":"application/json","kai-id":r.key,"kai-nonce":r.nonce,"kai-timestamp":""+r.timestamp,"kai-signature":r.signature},body:"GET"===t.method?void 0:JSON.stringify(t.payload)})];case 2:return[2,o.sent()]}}))}))},stats:function(e,n){return o(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,a.send({uri:"/env/"+(e||t)+"/meta/stats",method:"POST",payload:{envMetaType:window.kaiEnvMetaType,group:n.group?n.group:void 0}})];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()]}}))}))},track:function(e,n){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,a.send({uri:"/tracker/event/"+(n||t),method:"POST",payload:r(r({},e),{envMetaType:window.kaiEnvMetaType})})];case 1:return o.sent(),[2]}}))}))}};return a}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LocationService=void 0,n.LocationService=function(){return{path:function(){var e=window.location.pathname.split("?")[0].split("#")[0];return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TrackerService=void 0;var r=t(0);n.TrackerService=function(e,n){var t=!1,o=e.get("uh"),i=e.get("v");return o||(o=r.v4(),e.set("uh",o),t=!0),i||(i=[{from:"OUTSIDE",timestamp:Date.now(),on:n.path()}],e.set("v",i)),{userHash:function(){return""+o},firstVisit:function(){var e=!!t;return t=!1,e},vector:{all:function(){return i.map((function(e){return e}))},push:function(n){(i=e.get("v")).push(n),e.set("v",i)}}}}},function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,u)}c((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EventManager=void 0;var i=t(0);n.EventManager=function(e){var n=this,t=[],a=e.path(),u=window.location.pathname;window.addEventListener("load",(function(){return r(n,void 0,void 0,(function(){return o(this,(function(e){return t.filter((function(e){return"load"===e.type})).forEach((function(e){e.handler()})),[2]}))}))})),setInterval((function(){var e=c.getChangeVector();e&&t.filter((function(e){return"page_change"===e.type})).forEach((function(n){n.handler(e)}))}),100);var c={subscribe:function(e,n){var r=i.v4();return t.push({id:r,type:e,handler:n}),function(){for(var e=0;e<t.length;e++)if(t[e].id===r){t.splice(e);break}}},getChangeVector:function(){if(window.location.pathname!==u){u=window.location.pathname;var n=e.path();if(n!==a){var t={from:""+a,on:""+n,timestamp:Date.now()};if(a=n,t.from!==t.on)return t}}}};return c}}]);